
  <div class="ms-3">
    <div class="mt-3">
      <a href="javascript:history.back()" class="btn btn btn-secondary btn-sm">
        Go back
      </a>
    </div>
  </div>

<div class="container">
  <div class="row justify-content-center mt-3">

<div class="col-lg-10 mb-3 text-center">

<p class="text-danger"><small>Please note this tool is designed to offer you a general recommendation and guidance in structuring your session. It is not intended to provide legal medical advice or replace the expertise of a licensed healthcare professional. The information and suggestions generated by the tool are intended to serve only as a helpful resource. It remains crucial for you to rely on your professional training, experience, and judgment to provide personalized care for your client. Always adhere to the scope of practice and regulations governing massage therapy in your jurisdiction.</small></p>

</div>



    <div class="col-md-8">
      <div class="card">
        <div class="card-header text-center">
          <h3>The response</h3>
        </div>

        <div class="card-body pb-3" id="chat-messages">
<%= simple_format(@result) %>
        </div>

      </div>
    </div>
  </div>
</div>




</div>

<script>
$(document).ready(function() {
  $('#chat-form').submit(function(event) {
    event.preventDefault();

    // Get the user's message
    var userMessage = $('#user-message').val();

    // Clear the input field
    $('#user-message').val('');

    // Add the user's message to the chat interface
    $('#chat-messages').append('<div class="user-message">' + userMessage + '</div>');

    // Update the conversation history
    var conversationHistory = $('#conversation-history').val();
    conversationHistory += 'User: ' + userMessage + '\n';
    $('#conversation-history').val(conversationHistory);

    // Make an AJAX request to the ChatGPT API
    $.ajax({
      type: 'POST',
      url: '/gpt',
      data: { prompt: conversationHistory },
      dataType: 'json',
      success: function(response) {
            console.log('Response received:', response);
        var botMessage = response.bot_message;
        $('#chat-messages').append('<div class="bot-message">' + botMessage + '</div>');
      },
          error: function(xhr, status, error) {
    console.error('AJAX error:', error);
  }

        // Update the conversation history
          $('#chat-messages').append('<div class="bot-message">' + botMessage + '</div>');

    });
  });
});
</script>
